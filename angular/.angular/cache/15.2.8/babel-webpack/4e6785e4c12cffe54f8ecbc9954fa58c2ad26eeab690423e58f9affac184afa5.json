{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"src/app/auth.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nconst _c0 = [\"modal\"];\nfunction ConnexionComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 27);\n    i0.ɵɵtext(2, \"Your email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function ConnexionComponent_div_17_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.email = $event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.email);\n  }\n}\nfunction ConnexionComponent_button_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function ConnexionComponent_button_36_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.login());\n    });\n    i0.ɵɵtext(1, \"Login to your account\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ConnexionComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"a\", 30);\n    i0.ɵɵlistener(\"click\", function ConnexionComponent_div_37_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.createAccount());\n    });\n    i0.ɵɵtext(2, \"Create account\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ConnexionComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵlistener(\"click\", function ConnexionComponent_div_38_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.logout());\n    });\n    i0.ɵɵelementStart(1, \"a\", 32);\n    i0.ɵɵtext(2, \"Se deonnect\\u00E9\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class ConnexionComponent {\n  constructor(router, http, authService) {\n    this.router = router;\n    this.http = http;\n    this.authService = authService;\n    this.message = '';\n    this.email = '';\n    this.username = '';\n    this.password = '';\n    this.creatingAccount = false;\n    this.auth = authService;\n    this.users = [];\n  }\n  ngOnInit() {\n    this.auth = this.authService;\n    this.getUsers();\n  }\n  getUsers() {\n    this.http.get('/users').subscribe(response => {\n      this.users = response;\n    }, error => {\n      console.error('Error retrieving users:', error);\n    });\n  }\n  setMessage() {\n    if (this.auth.isLogged) {\n      this.message = '(pastille & msg vert) Vous êtes connecté';\n    } else {\n      this.message = '(pastille & msg rouge) Réessayez le mot de passe ou le nom d\\'utilisateur incorrect';\n    }\n  }\n  login() {\n    this.message = 'Connexion en cours';\n    this.auth.login(this.username, this.password).subscribe(isLogged => {\n      this.setMessage();\n      if (isLogged) {\n        this.router.navigate(['home']);\n      } else {\n        this.password = '';\n        this.router.navigate(['home/login']);\n      }\n      console.log(this.username, this.password);\n      setTimeout(() => {\n        this.close();\n      }, 1500);\n    });\n  }\n  logout() {\n    this.auth.logout();\n    this.message = 'Vous avez été déconnecté';\n  }\n  navigate() {\n    this.router.navigate(['home/login']);\n    console.log('navigate ouuuuu');\n    const classes = this.modal.nativeElement.classList;\n    if (classes.contains('hidden')) {\n      classes.remove('hidden');\n    }\n  }\n  close() {\n    const classes = this.modal.nativeElement.classList;\n    if (!classes.contains('hidden')) {\n      classes.add('hidden');\n    }\n  }\n  createAccount() {\n    this.router.navigate(['home/login']);\n    const classes = this.modal.nativeElement.classList;\n    if (classes.contains('hidden')) {\n      classes.remove('hidden');\n    }\n    this.creatingAccount = true;\n  }\n  submitForm() {\n    // Récupère les valeurs des inputs\n    const emailValue = this.email;\n    const usernameValue = this.username;\n    const passwordValue = this.password;\n    console.log(emailValue, usernameValue, passwordValue);\n    // Envoie les données vers Flask\n    // Utilise HttpClient pour effectuer une requête POST vers ton endpoint Flask\n    // Exemple :\n    this.http.post('/users', {\n      email: emailValue,\n      username: usernameValue,\n      password: passwordValue\n    }).subscribe(response => {\n      // Traitement de la réponse si nécessaire\n    }, error => {\n      console.error('Error submitting form:', error);\n    });\n    // Réinitialise les valeurs des inputs après l'envoi du formulaire\n    this.email = '';\n    this.username = '';\n    this.password = '';\n  }\n}\nConnexionComponent.ɵfac = function ConnexionComponent_Factory(t) {\n  return new (t || ConnexionComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.AuthService));\n};\nConnexionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ConnexionComponent,\n  selectors: [[\"app-connexion\"]],\n  viewQuery: function ConnexionComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modal = _t.first);\n    }\n  },\n  decls: 39,\n  vars: 7,\n  consts: [[\"data-modal-target\", \"modalId\", \"data-modal-toggle\", \"authentication-modal\", \"type\", \"button\", 1, \"block\", \"text-white\", \"hover:bg-cyan-400\", \"focus:ring-4\", \"focus:outline-none\", \"font-medium\", \"rounded-lg\", \"text-sm\", \"px-5\", \"py-2.5\", \"text-center\", \"bg-cyan-500\", \"focus:ring-cyan-500\", 3, \"click\"], [\"id\", \"default-modal\", \"tabindex\", \"-1\", \"aria-hidden\", \"true\", \"data-modal-show\", \"modalID\", 1, \"hidden\", \"fixed\", \"top-0\", \"left-0\", \"right-0\", \"z-50\", \"w-full\", \"p-4\", \"overflow-x-hidden\", \"overflow-y-auto\", \"md:inset-0\", \"h-[calc(100%-1rem)]\", \"flex\", \"justify-between\", \"max-h-full\"], [\"modal\", \"\"], [1, \"relative\", \"w-full\", \"mx-auto\", \"max-w-md\", \"max-h-full\"], [1, \"relative\", \"rounded-lg\", \"mx-auto\", \"my-24\", \"shadow\", \"bg-gray-800\"], [\"type\", \"button\", \"data-modal-hide\", \"authentication-modal\", 1, \"absolute\", \"top-3\", \"right-2.5\", \"text-gray-400\", \"bg-transparent\", \"rounded-lg\", \"text-sm\", \"p-1.5\", \"ml-auto\", \"inline-flex\", \"items-center\", \"hover:bg-gray-800\", \"hover:text-white\", 3, \"click\"], [\"aria-hidden\", \"true\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 20 20\", \"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"w-5\", \"h-5\"], [\"fill-rule\", \"evenodd\", \"d\", \"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\", \"clip-rule\", \"evenodd\"], [1, \"sr-only\"], [1, \"px-6\", \"py-6\", \"lg:px-8\"], [1, \"mb-4\", \"text-xl\", \"font-medium\", \"text-white\"], [\"action\", \"#\", 1, \"space-y-6\", 3, \"ngSubmit\"], [4, \"ngIf\"], [\"for\", \"username\", 1, \"block\", \"mb-2\", \"text-sm\", \"font-medium\", \"text-white\"], [\"type\", \"username\", \"name\", \"username\", \"id\", \"username\", \"placeholder\", \"name@company.com\", \"required\", \"\", 1, \"bg-gray-50\", \"border\", \"text-sm\", \"rounded-lg\", \"focus:ring-cyan-500\", \"focus:border-cyan-500\", \"block\", \"w-full\", \"p-2.5\", \"bg-gray-600\", \"placeholder-gray-400\", \"text-white\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"password\", 1, \"block\", \"mb-2\", \"text-sm\", \"font-medium\", \"text-white\"], [\"type\", \"password\", \"name\", \"password\", \"id\", \"password\", \"placeholder\", \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\", \"required\", \"\", 1, \"bg-gray-50\", \"border\", \"text-sm\", \"rounded-lg\", \"focus:ring-cyan-500\", \"focus:border-cyan-500\", \"block\", \"w-full\", \"p-2.5\", \"bg-gray-600\", \"placeholder-gray-400\", \"text-white\", 3, \"ngModel\", \"ngModelChange\"], [1, \"flex\", \"justify-between\"], [1, \"flex\", \"items-start\"], [1, \"flex\", \"items-center\", \"h-5\"], [\"id\", \"remember\", \"type\", \"checkbox\", \"value\", \"\", \"required\", \"\", 1, \"w-4\", \"h-4\", \"border\", \"border-gray-300\", \"rounded\", \"bg-gray-50\", \"focus:ring-3\", \"focus:ring-cyan-300\"], [\"for\", \"remember\", 1, \"ml-2\", \"text-sm\", \"font-medium\", \"text-white\"], [\"href\", \"#\", 1, \"text-sm0\", \"hover:underline\", \"text-cyan-400\"], [\"type\", \"submit\", 1, \"w-full\", \"text-white\", \"hover:bg-cyan-400\", \"focus:ring-4\", \"focus:outline-none\", \"focus:ring-cyan-300\", \"font-medium\", \"rounded-lg\", \"text-sm\", \"px-5\", \"py-2.5\", \"text-center\", \"bg-cyan-500\", \"focus:ring-cyan-500\", 3, \"click\"], [\"type\", \"submit\", \"class\", \"w-full text-white hover:bg-cyan-400 focus:ring-4 focus:outline-none focus:ring-cyan-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-cyan-500 focus:ring-cyan-500\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"text-sm flex justify-between text-white font-medium\", 4, \"ngIf\"], [\"class\", \"text-sm flex justify-between text-white font-medium\", 3, \"click\", 4, \"ngIf\"], [\"for\", \"email\", 1, \"block\", \"mb-2\", \"text-sm\", \"font-medium\", \"text-white\"], [\"type\", \"email\", \"name\", \"email\", \"id\", \"email\", \"placeholder\", \"name@company.com\", \"required\", \"\", 1, \"bg-gray-50\", \"border\", \"text-sm\", \"rounded-lg\", \"focus:ring-cyan-500\", \"focus:border-cyan-500\", \"block\", \"w-full\", \"p-2.5\", \"bg-gray-600\", \"placeholder-gray-400\", \"text-white\", 3, \"ngModel\", \"ngModelChange\"], [1, \"text-sm\", \"flex\", \"justify-between\", \"text-white\", \"font-medium\"], [1, \"hover:underline\", \"mx-auto\", \"text-cyan-400\", 3, \"click\"], [1, \"text-sm\", \"flex\", \"justify-between\", \"text-white\", \"font-medium\", 3, \"click\"], [\"href\", \"#\", 1, \"hover:underline\", \"mx-auto\", \"text-cyan-400\"]],\n  template: function ConnexionComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function ConnexionComponent_Template_button_click_0_listener() {\n        return ctx.navigate();\n      });\n      i0.ɵɵtext(1, \" Connexion \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 1, 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function ConnexionComponent_Template_button_click_6_listener() {\n        return ctx.close();\n      });\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(7, \"svg\", 6);\n      i0.ɵɵelement(8, \"path\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(9, \"span\", 8);\n      i0.ɵɵtext(10, \"Close modal\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(11, \"div\", 9)(12, \"h3\", 10);\n      i0.ɵɵtext(13, \"Sign in to our platform\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"h3\", 10);\n      i0.ɵɵtext(15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"form\", 11);\n      i0.ɵɵlistener(\"ngSubmit\", function ConnexionComponent_Template_form_ngSubmit_16_listener() {\n        return ctx.submitForm();\n      });\n      i0.ɵɵtemplate(17, ConnexionComponent_div_17_Template, 4, 1, \"div\", 12);\n      i0.ɵɵelementStart(18, \"div\")(19, \"label\", 13);\n      i0.ɵɵtext(20, \"Your username\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"input\", 14);\n      i0.ɵɵlistener(\"ngModelChange\", function ConnexionComponent_Template_input_ngModelChange_21_listener($event) {\n        return ctx.username = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"div\")(23, \"label\", 15);\n      i0.ɵɵtext(24, \"Your password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"input\", 16);\n      i0.ɵɵlistener(\"ngModelChange\", function ConnexionComponent_Template_input_ngModelChange_25_listener($event) {\n        return ctx.password = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(26, \"div\", 17)(27, \"div\", 18)(28, \"div\", 19);\n      i0.ɵɵelement(29, \"input\", 20);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"label\", 21);\n      i0.ɵɵtext(31, \"Remember me\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(32, \"a\", 22);\n      i0.ɵɵtext(33, \"Lost Password?\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(34, \"button\", 23);\n      i0.ɵɵlistener(\"click\", function ConnexionComponent_Template_button_click_34_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵtext(35, \"Login to your account\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(36, ConnexionComponent_button_36_Template, 2, 0, \"button\", 24);\n      i0.ɵɵtemplate(37, ConnexionComponent_div_37_Template, 3, 0, \"div\", 25);\n      i0.ɵɵtemplate(38, ConnexionComponent_div_38_Template, 3, 0, \"div\", 26);\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(15);\n      i0.ɵɵtextInterpolate(ctx.message);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.creatingAccount);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.username);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.password);\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngIf\", !ctx.auth.isLogged);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.auth.isLogged);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.auth.isLogged);\n    }\n  },\n  dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["i0","ConnexionComponent","constructor","router","http","authService","message","email","username","password","creatingAccount","auth","users","ngOnInit","getUsers","get","subscribe","response","error","console","setMessage","isLogged","login","navigate","log","setTimeout","close","logout","classes","modal","nativeElement","classList","contains","remove","add","createAccount","submitForm","emailValue","usernameValue","passwordValue","post","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["/Users/mathiszerari/Developer/Projects/2023/ng-discuss-app/angular/src/app/component/connexion/connexion.component.html","/Users/mathiszerari/Developer/Projects/2023/ng-discuss-app/angular/src/app/component/connexion/connexion.component.ts"],"sourcesContent":["<!-- Modal toggle -->\n<button data-modal-target=\"modalId\" (click)=\"navigate()\" data-modal-toggle=\"authentication-modal\" class=\"block text-white hover:bg-cyan-400 focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-cyan-500 focus:ring-cyan-500\" type=\"button\">\n    Connexion\n  </button>\n  \n  <!-- Main modal -->\n  <div id=\"default-modal\" #modal tabindex=\"-1\" aria-hidden=\"true\" data-modal-show=\"modalID\" class=\"hidden fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] flex justify-between max-h-full\">\n      <div class=\"relative w-full mx-auto max-w-md max-h-full\">\n          <!-- Modal content -->\n          <div class=\"relative rounded-lg mx-auto my-24 shadow bg-gray-800\">\n              <button (click)=\"close()\" type=\"button\" class=\"absolute top-3 right-2.5 text-gray-400 bg-transparent rounded-lg text-sm p-1.5 ml-auto inline-flex items-center hover:bg-gray-800 hover:text-white\" data-modal-hide=\"authentication-modal\">\n                  <svg aria-hidden=\"true\" class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\"></path></svg>\n                  <span class=\"sr-only\">Close modal</span>\n              </button>\n              <div class=\"px-6 py-6 lg:px-8\">\n                  <h3 class=\"mb-4 text-xl font-medium text-white\">Sign in to our platform</h3>\n                  <h3 class=\"mb-4 text-xl font-medium text-white\">{{ message }}</h3>\n                  <form (ngSubmit)=\"submitForm()\" class=\"space-y-6\" action=\"#\">\n                    <div *ngIf=\"creatingAccount\">\n                        <label for=\"email\" class=\"block mb-2 text-sm font-medium text-white\">Your email</label>\n                        <input [(ngModel)]=\"email\" type=\"email\" name=\"email\" id=\"email\" class=\"bg-gray-50 border text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5 bg-gray-600 placeholder-gray-400 text-white\" placeholder=\"name@company.com\" required>\n                    </div>\n                      <div>\n                          <label for=\"username\" class=\"block mb-2 text-sm font-medium text-white\">Your username</label>\n                          <input [(ngModel)]=\"username\" type=\"username\" name=\"username\" id=\"username\" class=\"bg-gray-50 border text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5 bg-gray-600 placeholder-gray-400 text-white\" placeholder=\"name@company.com\" required>\n                      </div>\n                      <div>\n                          <label for=\"password\" class=\"block mb-2 text-sm font-medium text-white\">Your password</label>\n                          <input [(ngModel)]=\"password\" type=\"password\" name=\"password\" id=\"password\" placeholder=\"••••••••\" class=\"bg-gray-50 border text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5 bg-gray-600 placeholder-gray-400 text-white\" required>\n                      </div>\n                      <div class=\"flex justify-between\">\n                          <div class=\"flex items-start\">\n                              <div class=\"flex items-center h-5\">\n                                  <input id=\"remember\" type=\"checkbox\" value=\"\" class=\"w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-cyan-300\" required>\n                              </div>\n                              <label for=\"remember\" class=\"ml-2 text-sm font-medium text-white\">Remember me</label>\n                          </div>\n                          <a href=\"#\" class=\"text-sm0 hover:underline text-cyan-400\">Lost Password?</a>\n                      </div>\n                      <button (click)=\"login()\" type=\"submit\" class=\"w-full text-white hover:bg-cyan-400 focus:ring-4 focus:outline-none focus:ring-cyan-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-cyan-500 focus:ring-cyan-500\">Login to your account</button>\n                      <button *ngIf=\"!auth.isLogged\" (click)=\"login()\" type=\"submit\" class=\"w-full text-white hover:bg-cyan-400 focus:ring-4 focus:outline-none focus:ring-cyan-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-cyan-500 focus:ring-cyan-500\">Login to your account</button>\n                      <div *ngIf=\"!auth.isLogged\" class=\"text-sm flex justify-between text-white font-medium\">\n                        <a (click)=\"createAccount()\" class=\" hover:underline mx-auto text-cyan-400\">Create account</a>\n                      </div>\n                      <div (click)=\"logout()\" *ngIf=\"auth.isLogged\" class=\"text-sm flex justify-between text-white font-medium\">\n                        <a href=\"#\" class=\" hover:underline mx-auto text-cyan-400\">Se deonnecté</a>\n                      </div>\n                  </form>\n              </div>\n          </div>\n      </div>\n  </div> \n  ","import { Component, ElementRef, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'src/app/auth.service';\nimport { HttpClient } from '@angular/common/http';\n\ninterface User {\n  username: string;\n  email: string;\n  password: string;\n}\n\n@Component({\n  selector: 'app-connexion',\n  templateUrl: './connexion.component.html',\n  styles: []\n})\nexport class ConnexionComponent {\n  users: User[];\n\n  @ViewChild('modal', { static: true })\n  modal!: ElementRef;\n  message: string;\n  email: string;\n  username: string;\n  password: string;\n  creatingAccount: boolean;\n  auth: AuthService;\n\n  constructor(\n    private router: Router,\n    private http: HttpClient,\n    private authService: AuthService\n  ) {\n    this.message = '';\n    this.email = '';\n    this.username = '';\n    this.password = '';\n    this.creatingAccount = false;\n    this.auth = authService;\n    this.users = [];\n  }\n\n  ngOnInit() {\n    this.auth = this.authService;\n    this.getUsers();\n  }\n\n  getUsers() {\n    this.http.get<User[]>('/users').subscribe(\n      (response) => {\n        this.users = response;\n      },\n      (error) => {\n        console.error('Error retrieving users:', error);\n      }\n    );\n  }\n\n  setMessage() {\n    if (this.auth.isLogged) {\n      this.message = '(pastille & msg vert) Vous êtes connecté';\n    } else {\n      this.message = '(pastille & msg rouge) Réessayez le mot de passe ou le nom d\\'utilisateur incorrect';\n    }\n  }\n\n  login() {\n    this.message = 'Connexion en cours';\n    this.auth.login(this.username, this.password).subscribe((isLogged: boolean) => {\n      this.setMessage();\n      if (isLogged) {\n        this.router.navigate(['home']);\n      } else {\n        this.password = '';\n        this.router.navigate(['home/login']);\n      }\n      console.log(this.username, this.password);\n      setTimeout(() => {\n        this.close();\n      }, 1500);\n    });\n  }\n\n  logout() {\n    this.auth.logout();\n    this.message = 'Vous avez été déconnecté';\n  }\n\n  navigate() {\n    this.router.navigate(['home/login']);\n    console.log('navigate ouuuuu');\n\n    const classes = this.modal.nativeElement.classList;\n\n    if (classes.contains('hidden')) {\n      classes.remove('hidden');\n    }\n  }\n\n  close() {\n    const classes = this.modal.nativeElement.classList;\n\n    if (!classes.contains('hidden')) {\n      classes.add('hidden');\n    }\n  }\n\n  createAccount() {\n    this.router.navigate(['home/login']);\n\n    const classes = this.modal.nativeElement.classList;\n\n    if (classes.contains('hidden')) {\n      classes.remove('hidden');\n    }\n\n    this.creatingAccount = true;\n  }\n\n  submitForm() {\n    // Récupère les valeurs des inputs\n    const emailValue = this.email;\n    const usernameValue = this.username;\n    const passwordValue = this.password;\n    console.log(emailValue, usernameValue, passwordValue);\n    \n  \n    // Envoie les données vers Flask\n    // Utilise HttpClient pour effectuer une requête POST vers ton endpoint Flask\n    // Exemple :\n    this.http.post('/users', { email: emailValue, username: usernameValue, password: passwordValue })\n      .subscribe(\n        (response) => {\n          // Traitement de la réponse si nécessaire\n        },\n        (error) => {\n          console.error('Error submitting form:', error);\n        }\n      );\n  \n    // Réinitialise les valeurs des inputs après l'envoi du formulaire\n    this.email = '';\n    this.username = '';\n    this.password = '';\n  }\n  \n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}